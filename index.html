<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="estilos.css">
  <title>CAPTACION DE AGUA</title>
   <link rel="shortcut icon" href="imagenes/icon.png" type="image/x-icon">
  <meta name="description" content="Estructura base con header, hero con estadísticas, sección problema local, soluciones y footer.">
</head>
<body>
 <header class="header">
  <div class="container nav" role="navigation" aria-label="Navegación principal">
    <div class="brand">
      <div class="logo" aria-hidden="true">PJ</div>
      <div>
        <h1>CAPTACIÓN DE AGUAS PLUVIALES EN ZINACANTEPEC</h1>
        <div></div>
      </div>
    </div>

    <button class="menu-toggle" aria-label="Abrir menú">
     <p>_</p><i class="fas fa-bars"></i>
    </button>
    <nav class="nav-menu" aria-label="Enlaces principales">
      <ul>
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#problema">Problema</a></li>
        <li><a href="#soluciones">Soluciones</a></li>
        <li><a href="#contacto">Contacto</a></li>
        <li><a href="calculadora.html">Calculadora</a></li>
      </ul>
    </nav>
  </div>
</header>
        <button class="menu-toggle"><i class="fas fa-bars"></i>
      <nav aria-label="Enlaces principales">
          
        </ul>
      </nav>
    </div>
    </button>
  </header>
    <section id="hero" class="hero">
  <div class="hero-bg"><img src="imagenes/agua2.png" alt=""></div> 
  <div class="hero-content">
  </div>
</section>
  </header>

  <main class="container">

    <section class="hero" id="inicio">
      <div class="hero-inner">
        <div class="hero-card">
         <h2>El Problema</h2>
                <p>Aunque en Zinacantepec recibe entre 950 y 1050 milimetros de lluvia cada año, muchas colonias sufren escasez de agua. El problema no es la falta de lluvia si no que no se cuenta con una infrestructura para almacenarla ni tratarla correctamente.</p>
                <p>De acuerdo con la CAEM y el Ayuntamiento de Zinacantepec al menos el 35% de las viviendas tienen problemas.
                    Zinacantepc se encuntra al sureste de Valle de Toluca, en una zona con clima templado subhumedo, caracterixadopor lluvias abudantes en verano y un invierno seco.De acuerdo con Weather Spark y la CONAGUA, la precipicacion anual promedioen el municipio </p>
            
          <div class="stats" role="list" aria-label="Estadísticas resumidas">
            <div class="stat" role="listitem">
              <div class="num">1,250</div>
              <div class="label">Personas afectadas</div>
            </div>
            <div class="stat" role="listitem">
              <div class="num">18%</div>
              <div class="label">Incremento anual</div>
            </div>
            <div class="stat" role="listitem">
              <div class="num">5</div>
              <div class="label">Proyectos pilotos</div>
            </div>
          </div>

        </div>

        <aside class="hero-card" aria-labelledby="hero-acciones">
          <h3 id="hero-acciones">Acciones prioritarias</h3>
          <ul style="margin:0;padding-left:1.1rem;color:var(--muted)">
            <li>Diagnóstico territorial y mapeo participativo</li>
            <li>Capacitación a líderes comunitarios</li>
            <li>Implementación de 3 pilotos de bajo costo</li>
          </ul>
          <a href="#soluciones" class="cta" style="display:inline-block;margin-top:1rem">Ver soluciones</a>
        </aside>
      </div>
    </section>
    <section class="section" id="problema">
      <div class="problem">
        <article class="content" aria-labelledby="prob-title">
          <h2 id="prob-title">Problema local: escasez de acceso a agua potable</h2>
          <p>Descripción: en muchas colonias del municipio se reporta falta de agua potable constante, lo que impacta la salud pública, la higiene y la actividad económica local. Aquí se resumen causas, actores afectados y evidencias.</p>

          <div class="info">
            <div><span class="tag">Causa principal</span> Red de distribución insuficiente y pérdidas por fugas.</div>
            <div><strong>Actores afectados:</strong> hogares, escuelas y comercios pequeños.</div>
            <div><strong>Evidencia:</strong> reportes de gabinete y encuestas locales (2025).</div>
          </div>

          <h4 style="margin-top:1rem">Impactos</h4>
          <ul style="color:var(--muted)">
            <li>Enfermedades gastrointestinales</li>
            <li>Aumento de gasto doméstico en compra de agua</li>
            <li>Menor productividad en comercios</li>
          </ul>
        </article>

        <aside style="padding:1rem;background:linear-gradient(180deg,#fff,#fbfdff);border-radius:12px;box-shadow:0 6px 18px rgba(15,23,42,0.04);">
          <h3>Datos locales</h3>
          <dl style="color:var(--muted)">
            <dt>Precipitación anual</dt>
            <dd>800 mm (promedio)</dd>
            <dt>Población afectada</dt>
            <dd>~1,250 habitantes</dd>
            <dt>Prioridad</dt>
            <dd>Alta</dd>
          </dl>
        </aside>
      </div>
    </section>
    <section class="section" id="soluciones">
      <h2>Soluciones propuestas</h2>
      <p style="color:var(--muted)">Propuestas escalables y participativas para mejorar el acceso y gestión del agua.</p>

      <div class="solutions-grid" role="list">
        <article class="solution" role="listitem">
          <h3>Captación de agua pluvial</h3>
          <p>Instalación de sistemas de recolección en hogares y escuelas con filtros sencillos para uso no potable y recarga de cisternas comunitarias.</p>
        
        </article>

        <article class="solution" role="listitem">
          <h3>Reparación de red</h3>
          <p>Programa de identificación y reparación de fugas prioritarias, con cronograma y monitoreo de pérdidas.</p>
          
        </article>

        <article class="solution" role="listitem">
          <h3>Gestión comunitaria</h3>
          <p>Formación de comités de agua locales que administren recursos, cobros y mantenimiento con transparencia.</p>
          
        </article>

      </div>

    </section>
    <section class="section" id="calculadora">
      <h2>Calculadora de captación pluvial (básica)</h2>
      <p style="color:var(--muted)">Calcula el volumen estimado de agua recolectada según área de techo, precipitación y material.</p>

      <div style="display:grid;grid-template-columns:1fr 320px;gap:1rem;align-items:start;margin-top:1rem">
        <form id="calc-form" class="hero-card" aria-labelledby="calc-title" style="padding:1rem;">
          <h3 id="calc-title">Entradas</h3>

          <label style="display:block;margin-top:.5rem">rea del techo (m²)
            <input type="number" step="0.01" id="area" placeholder="Ej. 50" required style="width:100%;padding:.5rem;margin-top:.25rem;border-radius:8px;border:1px solid rgba(15,23,42,0.06)">
          </label>

          <label style="display:block;margin-top:.5rem">Precipitación (mm) — periodo seleccionado
            <input type="number" step="0.1" id="precipitacion" placeholder="Ej. 800" required style="width:100%;padding:.5rem;margin-top:.25rem;border-radius:8px;border:1px solid rgba(15,23,42,0.06)">
          </label>

          <label style="display:block;margin-top:.5rem">Material del techo
            <select id="material" style="width:100%;padding:.5rem;margin-top:.25rem;border-radius:8px;border:1px solid rgba(15,23,42,0.06)">
              <option value="">--Selecciona--</option>
            </select>
          </label>

          <label style="display:block;margin-top:.5rem">Eficiencia del sistema (%)
            <input type="number" id="eficiencia" step="0.1" placeholder="Ej. 85" required style="width:100%;padding:.5rem;margin-top:.25rem;border-radius:8px;border:1px solid rgba(15,23,42,0.06)">
          </label>

          <div style="margin-top:.75rem;display:flex;gap:.5rem">
            <button type="submit" class="cta" style="background:var(--accent);">Calcular</button>
            <button type="button" id="limpiar" class="btn">Limpiar</button>
          </div>

          <div id="errors" aria-live="polite" style="color:#b91c1c;margin-top:.5rem"></div>
        </form>

        <aside class="hero-card" class="tama"; aria-labelledby="res-title">
          <h3 id="res-title">Resultados</h3>
          <div id="result-panel" style="margin-top:.5rem">
            <p style="color:var(--muted)">Aquí se mostrarán los resultados una vez que completes el formulario.</p>
          </div>

          <details style="margin-top:1rem;color:var(--muted)">
            <summary>Variables y constantes usadas</summary>
            <ul>
              <li><strong>1 mm lluvia sobre 1 m² = 1 litro</strong> (constante usada)</li>
              <li>Eficiencia del sistema: pérdidas por filtros y primera corriente.</li>
              <li>Coeficiente de escurrimiento según material del techo.</li>
            </ul>
          </details>
        </aside>
      </div>


    </section>
    <center><div class="faq-section hero-card" style="margin-top:1rem; padding:1rem;">
  <h3>Preguntas frecuentes</h3>

  <div class="faq-item">
    <button class="faq-question" type="button">1. ¿Cuánto cuesta instalar un sistema?</button>
    <div class="faq-answer">En Zinacantepec, un sistema doméstico cuesta entre 6,000 y 15,000 pesos, según el tamaño del techo y del tanque.</div>
  </div>

  <div class="faq-item">
    <button class="faq-question" type="button">2. ¿Se puede usar el agua para beber?</button>
    <div class="faq-answer">Solo si pasa por filtros y purificadores especiales; normalmente se usa para riego, limpieza o sanitarios.</div>
  </div>

  <div class="faq-item">
    <button class="faq-question" type="button">3. ¿Qué pasa si llueve poco?</button>
    <div class="faq-answer">Aun con lluvias ligeras, el sistema puede captar agua suficiente para usos domésticos, si el techo tiene buena superficie.</div>
  </div>

  <div class="faq-item">
    <button class="faq-question" type="button">4. ¿Cada cuánto debo limpiarlo?</button>
    <div class="faq-answer">Canaletas y filtros: cada tres meses. Cisternas o tinacos: cada seis meses.</div>
  </div>

  <div class="faq-item">
    <button class="faq-question" type="button">5. ¿Qué beneficios tiene?</button>
    <div class="faq-answer">Ahorra agua potable, reduce gastos de pipas y ayuda al medio ambiente.</div>
  </div>

  <div class="faq-item">
    <button class="faq-question" type="button">6. ¿Necesito permisos para instalarlo?</button>
    <div class="faq-answer">En la mayoría de los casos no, pero conviene avisar al ayuntamiento si el sistema es comunitario o escolar.</div>
  </div>
</div>


    </center>

  </main>

  <script>
document.querySelectorAll('.faq-question').forEach(button => {
  button.addEventListener('click', () => {
    const answer = button.nextElementSibling;
    answer.style.display = (answer.style.display === 'block') ? 'none' : 'block';
  });
});

    const materiales = [
      { id: 'teja', nombre: 'Teja cerámica', coef: 0.90 },
      { id: 'lamina', nombre: 'Lámina metálica', coef: 0.85 },
      { id: 'concreto', nombre: 'Concreto', coef: 0.60 }
    ];
    const LITROS_POR_MM_M2 = 1; 

    const materialSelect = document.getElementById('material');
    materiales.forEach(m => {
      const opt = document.createElement('option'); opt.value = m.id; opt.textContent = `${m.nombre} (coef ${m.coef})`; materialSelect.appendChild(opt);
    });

 
    function validatePositiveNumber(value){
      const n = Number(value);
      return !Number.isNaN(n) && n > 0;
    }

    function showError(msg){
      const el = document.getElementById('errors'); el.textContent = msg;
    }

    function clearError(){ document.getElementById('errors').textContent = ''; }

     function calcularVolumen({ area, precipitacion, coef, eficiencia }){
      const eficienciaFrac = eficiencia / 100;
      return area * precipitacion * coef * eficienciaFrac * LITROS_POR_MM_M2;
    }

    function renderResultados(volumenLitros){
      const panel = document.getElementById('result-panel');
      if (!volumenLitros || volumenLitros <= 0) {
        panel.innerHTML = `<p style="color:var(--muted)">No hay resultados válidos. Ajusta los valores e intenta de nuevo.</p>`;
        return;
      }
      const litrosDiarios = volumenLitros.toFixed(1);
      
      const recomendado = Math.ceil(volumenLitros / 500) * 500; 

      panel.innerHTML = `
        <div style="background:var(--card);padding:.75rem;border-radius:8px;border:1px solid rgba(15,23,42,0.03)">
          <div><strong>Volumen estimado:</strong> ${litrosDiarios} L</div>
          <div style="color:var(--muted);margin-top:.35rem">(Estimación para el periodo de precipitación ingresado)</div>
          <div style="margin-top:.6rem"><strong>Tanque recomendado:</strong> ${recomendado} L</div>
        </div>
      `;
    }

    const form = document.getElementById('calc-form');
    form.addEventListener('submit', (e) =>{
      e.preventDefault(); clearError();
      const area = document.getElementById('area').value;
      const precip = document.getElementById('precipitacion').value;
      const mat = document.getElementById('material').value;
      const eficiencia = document.getElementById('eficiencia').value;

      if (!validatePositiveNumber(area)) { showError('Ingresa un área válida mayor que 0.'); return; }
      if (!validatePositiveNumber(precip)) { showError('Ingresa una precipitación válida mayor que 0.'); return; }
      if (!eficiencia || Number(eficiencia) <= 0 || Number(eficiencia) > 100) { showError('La eficiencia debe estar entre 0 y 100.'); return; }
      const materialObj = materiales.find(m=>m.id===mat);
      if (!materialObj){ showError('Selecciona un material de techo válido.'); return; }

      const volumen = calcularVolumen({ area: Number(area), precipitacion: Number(precip), coef: materialObj.coef, eficiencia: Number(eficiencia) });
      renderResultados(volumen);
    });

    document.getElementById('limpiar').addEventListener('click', ()=>{
      form.reset(); clearError(); document.getElementById('result-panel').innerHTML = `<p style="color:var(--muted)">Aquí se mostrarán los resultados una vez que completes el formulario.</p>`;
    });
  const toggleBtn = document.querySelector('.menu-toggle');
  const navMenu = document.querySelector('.nav-menu');

  toggleBtn.addEventListener('click', () => {
    navMenu.classList.toggle('active');
    const expanded = toggleBtn.getAttribute('aria-expanded') === 'true';
    toggleBtn.setAttribute('aria-expanded', !expanded);
  });

  

  const zonasData = {
  'z1': {
    nombre: 'Colonia El Olivo',
    descripcion: 'Prioridad ALTA. Alto índice de escasez y baja infraestructura. Ideal para piloto de captación en escuelas.',
    datos: 'Población afectada: 450. Precipitación anual: 980mm.'
  },
  'z2': {
    nombre: 'Barrio La Veracruz',
    descripcion: 'Prioridad MEDIA. Fugas recurrentes en la red principal. Se recomienda proyecto de reparación de red.',
    datos: 'Fugas reportadas: 12/año. Tipo de red: Asbesto-cemento.'
  },
  'z3': {
    nombre: 'San Miguel Hojas',
    descripcion: 'Prioridad MEDIA-BAJA. Necesidad de capacitación comunitaria y comité de agua para gestión y mantenimiento.',
    datos: 'Comité actual: Inactivo. Viviendas: 150.'
  }
};

const mapZones = document.querySelectorAll('.map-zone');
const infoPopup = document.getElementById('info-popup');
const popupTitle = document.getElementById('popup-title');
const popupContent = document.getElementById('popup-content');
const popupData = document.getElementById('popup-data');

let activeZone = null; // Para rastrear la gota activa

function showPopup(zoneId, event) {
  const data = zonasData[zoneId];
  if (!data) return;

  
  if (activeZone) {
    activeZone.classList.remove('active');
  }


  const currentZoneElement = event.currentTarget;
  currentZoneElement.classList.add('active');
  activeZone = currentZoneElement;


  popupTitle.textContent = data.nombre;
  popupContent.textContent = data.descripcion;
  popupData.textContent = data.datos;


  const zoneRect = event.currentTarget.getBoundingClientRect(); 
  const mapContainerRect = event.currentTarget.parentNode.getBoundingClientRect(); 


  let topPos = zoneRect.top - mapContainerRect.top - infoPopup.offsetHeight - 15; 
  let leftPos = zoneRect.left - mapContainerRect.left + (zoneRect.width / 2) - (infoPopup.offsetWidth / 2);


  if (leftPos < 0) {
      leftPos = 5; 
  }
  
  if (leftPos + infoPopup.offsetWidth > mapContainerRect.width) {
      leftPos = mapContainerRect.width - infoPopup.offsetWidth - 5;
  }

  if (topPos < 0) {
      topPos = zoneRect.bottom - mapContainerRect.top + 15; 
  }


 
}

function hidePopup() {
  infoPopup.classList.remove('active');
  if (activeZone) {
    activeZone.classList.remove('active'); 
    activeZone = null;
  }
}

mapZones.forEach(zone => {
  zone.addEventListener('click', (e) => {
    e.stopPropagation();
    const zoneId = e.currentTarget.dataset.zoneId;
    showPopup(zoneId, e);
  });
});

document.addEventListener('click', (e) => {
  if (!infoPopup.contains(e.target) && !e.target.classList.contains('map-zone') && !e.target.closest('.map-zone')) {
    hidePopup();
  }
});


document.querySelectorAll('.map-zone').forEach(zone => {
  zone.addEventListener('click', function() {
    document.querySelectorAll('.map-zone').forEach(z => z.classList.remove('clicked'));
    this.classList.add('clicked');
  });
});


document.addEventListener('click', (e) => {
  if (!e.target.classList.contains('map-zone')) {
    document.querySelectorAll('.map-zone').forEach(z => z.classList.remove('clicked'));
  }
});


  </script>

 <section class="ubi" id="mapa">
  <center>
    <h1>Mapa de Zonas Prioritarias</h1>
    <p style="color:var(--texto-terciario)">Coloca el cursor sobre cada gota para ver la información.</p>

    <div class="map-container" style="position: relative;">
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d25145.319615629745!2d-99.7459885911608!3d19.28611870316843!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x85cd87df009fa987%3A0xfd9a41e67555beae!2sSan%20Miguel%20Zinacantepec%2C%20M%C3%A9x.!5e1!3m2!1ses-419!2smx!4v1760971023242!5m2!1ses-419!2smx"
        width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"></iframe>

      <div class="map-zone" data-zone-id="z1" style="top: 20%; left: 60%;">Zona1</div>
      <div class="map-zone" data-zone-id="z2" style="top: 30%; left: 20%;">Zona2</div>
      <div class="map-zone" data-zone-id="z3" style="top: 70%; left: 26%;">Zona3</div>

      
      <div id="info-popup" class="info-popup"
        style="position:absolute; display:none; background:white; padding:10px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
        <h4 id="popup-title"></h4>
        <p id="popup-content"></p>
        <small id="popup-data" style="color:var(--azul-claro); display: block; margin-top: 5px;"></small>
      </div>
    </div>
  </center>
</section>


  <footer>
    <div class="container footer-inner">
      <div class="credits">2025, Amy Molina Sanchez, Erick Samuel Jaramillo Cuero, Jose Miguel Cerritos Basilio</div>
      <div style="display:flex;gap:.5rem;align-items:center">
      </div>
    </div>
  </footer>

</body>
</html>
